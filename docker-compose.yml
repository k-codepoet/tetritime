# Tetritime - Docker Compose for home.codepoet.site
# 내부 도메인 테스트용 (개발 서버)
#
# 사용법 (Linux 서버에서):
#   cd /path/to/tetritime
#   docker compose up -d --build
#
# 접속: http://tetritime.home.codepoet.site
#
# 참고:
# - Portainer GitOps: Linux buildx 문제로 실패
# - GHCR 푸시: GitHub PAT에 write:packages 권한 필요
# - 현재는 Linux에서 git pull 후 docker compose up -d --build 로 배포

services:
  tetritime:
    build:
      context: .
      dockerfile: Dockerfile
    image: tetritime:dev
    container_name: tetritime
    restart: unless-stopped
    environment:
      - NODE_ENV=development
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.tetritime.rule=Host(`tetritime.home.codepoet.site`)"
      - "traefik.http.routers.tetritime.entrypoints=web"
      - "traefik.http.services.tetritime.loadbalancer.server.port=5173"
    networks:
      - traefik

networks:
  traefik:
    external: true
